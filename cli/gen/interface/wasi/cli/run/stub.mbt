// Generated by `wit-bindgen` 0.45.1.
/// Run the program.
pub async fn run() -> Result[Unit, Unit] {
      let task = @ffi.current_task();

      let (reader, writer) = @ffi.new_stream(
            @stdin.static_ffi_stream_reader_byte_stream_table
      )

      let hello = "hello world\n".to_bytes().to_fixedarray()
      @ffi._async_debug("spawn write task");
      task.spawn(
            fn() {
                  let n = writer.write(hello)
                  let _ = writer.drop()
            }
      )
      @ffi._async_debug("spawn read task");
      task.spawn(
            fn() {
                  let _ = @stdout.write_via_stream(reader)
            }
      )
      @ffi._async_debug("before run complete");
      Ok(())
}

